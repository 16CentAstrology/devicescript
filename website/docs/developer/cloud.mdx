---
sidebar_position: 15
---

# Cloud

DeviceScript provides a cloud agnostic device to cloud API
that allows to send and receive small JSON messages to an online gateway.
The gateway can route the messages into any further cloud service.

As a proof of concept, DeviceScript can be connected to the [Development Gateway](/developer/gateway).

## CloudAdapter client

The **cloud adapter** service is the abstraction layer to interact with an online gateway. We start by instantiating a client role
to bind to the server.

```ts
const cloud = new ds.CloudAdapter()
```

## Monitoring

You can collect usage telemetry of your DeviceScript using `trackEvent`.

```ts
const cloud = new ds.CloudAdapter()
cloud.trackEvent("started")
```

When connected to the gateway, the device is modelled as a user and the connection as a session.
The data is injected directly
in [Application Insights](https://learn.microsoft.com/en-us/azure/azure-monitor/app/app-insights-overview)
and can be analyzed through the Azure portal.

## Upload JSON

DeviceScript will stringify and upload your object as a JSON payload. The gateway add this messages
into an [Azure Event Hub](https://azure.microsoft.com/en-us/products/event-hubs/), additonal sinks can be configured online.

```ts
const cloud = new ds.CloudAdapter()
cloud.uploadObject({ msg: "hello" })
```
